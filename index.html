<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pong MÃ³vil</title>
<style>
    body {
        background-color: black;
        margin: 0;
        overflow: hidden;
        touch-action: none;
    }
    canvas {
        display: block;
        margin: auto;
        background: black;
    }
    #btnReiniciar {
        display: none;
        position: absolute;
        top: 10px;
        right: 10px;
        padding: 10px 15px;
        background: white;
        border: none;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
    }
</style>
</head>
<body>
<canvas id="pong"></canvas>
<button id="btnReiniciar">Reiniciar</button>

<script>
const canvas = document.getElementById("pong");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let paddleHeight = 100, paddleWidth = 20;
let player1 = { x: 10, y: canvas.height / 2 - paddleHeight / 2, score: 0 };
let player2 = { x: canvas.width - paddleWidth - 10, y: canvas.height / 2 - paddleHeight / 2, score: 0 };
let ball = { x: canvas.width / 2, y: canvas.height / 2, radius: 10, speedX: 5, speedY: 5 };
let gameRunning = false;
let gameOver = false;

function drawRect(x, y, w, h, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x, y, w, h);
}

function drawCircle(x, y, r, color) {
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI * 2);
    ctx.closePath();
    ctx.fill();
}

function drawText(text, x, y, color, size = "30px") {
    ctx.fillStyle = color;
    ctx.font = `${size} Arial`;
    ctx.fillText(text, x, y);
}

function resetBall() {
    ball.x = canvas.width / 2;
    ball.y = canvas.height / 2;
    ball.speedX = -ball.speedX;
}

function update() {
    if (!gameRunning || gameOver) return;

    ball.x += ball.speedX;
    ball.y += ball.speedY;

    if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
        ball.speedY = -ball.speedY;
    }

    if (
        ball.x - ball.radius < player1.x + paddleWidth &&
        ball.y > player1.y &&
        ball.y < player1.y + paddleHeight
    ) {
        ball.speedX = -ball.speedX;
    }

    if (
        ball.x + ball.radius > player2.x &&
        ball.y > player2.y &&
        ball.y < player2.y + paddleHeight
    ) {
        ball.speedX = -ball.speedX;
    }

    if (ball.x - ball.radius < 0) {
        player2.score++;
        checkWinner();
        resetBall();
    }

    if (ball.x + ball.radius > canvas.width) {
        player1.score++;
        checkWinner();
        resetBall();
    }
}

function checkWinner() {
    if (player1.score >= 5 || player2.score >= 5) {
        gameOver = true;
        document.getElementById("btnReiniciar").style.display = "block";
    }
}

function render() {
    drawRect(0, 0, canvas.width, canvas.height, "black");
    drawText(player1.score, canvas.width / 4, 50, "white", "40px");
    drawText(player2.score, (canvas.width / 4) * 3, 50, "white", "40px");

    drawRect(player1.x, player1.y, paddleWidth, paddleHeight, "white");
    drawRect(player2.x, player2.y, paddleWidth, paddleHeight, "white");
    drawCircle(ball.x, ball.y, ball.radius, "white");

    if (!gameRunning && !gameOver) {
        drawText("Toca para iniciar", canvas.width / 2 - 100, canvas.height / 2, "white");
    }

    if (gameOver) {
        let ganador = player1.score > player2.score ? "Jugador 1" : "Jugador 2";
        drawText(`Ganador: ${ganador}`, canvas.width / 2 - 100, canvas.height / 2, "yellow");
    }
}

function gameLoop() {
    update();
    render();
    requestAnimationFrame(gameLoop);
}

canvas.addEventListener("touchmove", (e) => {
    let touch = e.touches[0];
    if (touch.clientX < canvas.width / 2) {
        player1.y = touch.clientY - paddleHeight / 2;
    } else {
        player2.y = touch.clientY - paddleHeight / 2;
    }
});

canvas.addEventListener("touchstart", () => {
    if (!gameRunning && !gameOver) {
        gameRunning = true;
    }
});

document.getElementById("btnReiniciar").addEventListener("click", () => {
    player1.score = 0;
    player2.score = 0;
    gameOver = false;
    gameRunning = false;
    document.getElementById("btnReiniciar").style.display = "none";
});

gameLoop();
</script>
</body>
</html>

