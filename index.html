<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pong Corregido</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
    }
    canvas {
        display: block;
        margin: auto;
        background: black;
    }
    .controls {
        position: fixed;
        bottom: 10px;
        width: 100%;
        display: flex;
        justify-content: space-around;
    }
    button {
        width: 100px;
        height: 100px;
        font-size: 30px;
        border-radius: 50%;
        background: white;
        border: none;
    }
</style>
</head>
<body>

<canvas id="pongCanvas"></canvas>

<div class="controls">
    <button id="up">⬆️</button>
    <button id="down">⬇️</button>
</div>

<script>
const canvas = document.getElementById("pongCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const paddleWidth = 10, paddleHeight = 100;
let leftPaddleY = canvas.height / 2 - paddleHeight / 2;
let rightPaddleY = canvas.height / 2 - paddleHeight / 2;

const ballSize = 10;
let ballX = canvas.width / 2, ballY = canvas.height / 2;
let ballSpeedX = 5, ballSpeedY = 5;

const paddleSpeed = 10;

// Movimiento manual paleta derecha
let rightPaddleUp = false, rightPaddleDown = false;

// Controles teclado
document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp") rightPaddleUp = true;
    if (e.key === "ArrowDown") rightPaddleDown = true;
});
document.addEventListener("keyup", e => {
    if (e.key === "ArrowUp") rightPaddleUp = false;
    if (e.key === "ArrowDown") rightPaddleDown = false;
});

// Controles táctiles
document.getElementById("up").addEventListener("touchstart", () => rightPaddleUp = true);
document.getElementById("up").addEventListener("touchend", () => rightPaddleUp = false);
document.getElementById("down").addEventListener("touchstart", () => rightPaddleDown = true);
document.getElementById("down").addEventListener("touchend", () => rightPaddleDown = false);

function drawPaddle(x, y) {
    ctx.fillStyle = "white";
    ctx.fillRect(x, y, paddleWidth, paddleHeight);
}

function drawBall() {
    ctx.fillStyle = "white";
    ctx.fillRect(ballX, ballY, ballSize, ballSize);
}

function resetBall() {
    ballX = canvas.width / 2;
    ballY = canvas.height / 2;
    ballSpeedX *= -1;
    ballSpeedY = 5 * (Math.random() > 0.5 ? 1 : -1);
}

function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Mover paleta derecha manualmente
    if (rightPaddleUp && rightPaddleY > 0) rightPaddleY -= paddleSpeed;
    if (rightPaddleDown && rightPaddleY < canvas.height - paddleHeight) rightPaddleY += paddleSpeed;

    // Movimiento de la pelota
    ballX += ballSpeedX;
    ballY += ballSpeedY;

    // Rebote arriba/abajo
    if (ballY <= 0 || ballY + ballSize >= canvas.height) {
        ballSpeedY *= -1;
    }

    // Colisión con paleta izquierda
    if (
        ballX <= paddleWidth &&
        ballY + ballSize >= leftPaddleY &&
        ballY <= leftPaddleY + paddleHeight
    ) {
        ballSpeedX *= -1;
    }

    // Colisión con paleta derecha
    if (
        ballX + ballSize >= canvas.width - paddleWidth &&
        ballY + ballSize >= rightPaddleY &&
        ballY <= rightPaddleY + paddleHeight
    ) {
        ballSpeedX *= -1;
    }

    // Punto izquierda
    if (ballX + ballSize > canvas.width) {
        resetBall();
    }

    // Punto derecha
    if (ballX < 0) {
        resetBall();
    }

    // Dibujar paletas y pelota
    drawPaddle(0, leftPaddleY); // izquierda fija
    drawPaddle(canvas.width - paddleWidth, rightPaddleY); // derecha manual
    drawBall();
}

setInterval(update, 1000 / 60);
</script>
</body>
</html>
